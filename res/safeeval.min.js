/*! types.js v0.314 | http://code.google.com/p/obremsdk/ | BSD 2-Clause */
function FilterScript(e,t){var n=0;var r=[];var i=-1;var s=0;var o=0;var u=0;var a=0;var f=0;var l=0;var c=["if","else","while","do","break","function","return","var","switch","case","default","null","undefined"];var h=["eval","new","this","arguments"];if(null==t)t=function(t,n){throw Error("Disallowed identifier "+t+" @ "+n)};for(var p=0;p<e.length;p++){var d=e.charCodeAt(p);if(32===d||13===d||10===d||9===d){for(i=p+1;i<e.length;i++){d=e.charCodeAt(i);if(32!==d&&13!==d&&10!==d&&9!==d)break}p=i-1}else if(36===d||95===d||d>=65&&d<=90||d>=97&&d<=122){for(i=p+1;i<e.length;i++){d=e.charCodeAt(i);if(36===d||95===d||d>=65&&d<=90||d>=97&&d<=122||d>=48&&d<=57){}else{break}}var v=e.slice(p,i);if(InArray(h,v))throw Error("Disallowed Keyword '"+v+"' @ "+p);if("for"===v){if(0!==u)throw Error("Unexpected keyword for @ "+p);o=1;l=0}else if(InArray(c,v)){if(0!==u&&"function"!==v)throw Error("Unexpected keyword '"+v+"' @ "+p);l=0}else{if(p-n>0)r.push(e.slice(n,p));n=i;var m=t(v,p);r.push(m);l=1}u++;p=i-1}else if(34===d||39===d){u++;if(1===l)throw Error("Unexpected Start of String @ "+p);var g=d;for(i=p+1;i<e.length;i++){d=e.charCodeAt(i);if(92===d)i++;else if(g===d)break}p=i;l=1}else if(d>=48&&d<=57){u++;if(1===l)throw Error("Unexpected Number Literal '"+e.charAt(p)+"' @ "+p+" ("+e+")");var y=0;for(i=p+1;i<e.length;i++){d=e.charCodeAt(i);if(46===d&&++y>1)break;else if(d<48||d>57)break}p=i-1;l=1}else if(59===d||58===d||44===d){if(0===l&&u>1)throw Error("Unexpected Semi-Colon/Comma @ "+p);if(59===d)u=0;l=0}else if(123===d||125===d){if(123===d){a++;if(a>10)throw Error("Too Many Open Braces @ "+p)}else{a--;if(a<0)throw Error("Unexpected Close Brace @ "+p)}l=0;o=0;u=0}else if(40===d){s++;if(s>10)throw Error("Too Many Open Parens @ "+p);l=0}else if(41===d){s--;if(s<0)throw Error("Extra Close Paren @ "+p);l=1}else if(47===d){if(d===e.charCodeAt(p+1)){for(i=p+2;i<e.length;i++){d=e.charCodeAt(i);if(13===d||10===d)break}p=i}else if(42===e.charCodeAt(p+1)){for(i=p+2;i<e.length;i++){if(42===e.charCodeAt(i)&&47===e.charCodeAt(i+1))break}p=i+1}else if(1===l){l=0}else{for(i=p+1;i<e.length;i++){d=e.charCodeAt(i);if(92===d)i++;else if(47===d)break}var b={};for(i++;i<e.length;i++){d=e.charCodeAt(i);if(103===d||105===d||109===d){if(undefined!==b[d])throw Error("RegExp flag '"+e.charAt(i)+"' defined twice @ "+i);b[d]=1}else{break}}p=i-1;l=1}}else if(91===d){f++;l=0}else if(93===d){f--;if(f<0)throw Error("Unexpected Close Bracket @ "+p);l=1}else if(45===d){if(d==e.charCodeAt(p+1)){if(0===l)throw Error("Unexpected Decrement Op @ "+p);p++;l=1}else{l=0}}else if(60===d||61===d||62===d||38===d||43===d||124===d){if(1!==l)throw Error("Unexpected Operator @ "+p+" ("+e+")");if(d===e.charCodeAt(p+1)){p++;if(43===d)l=1;else l=0}else if(61===e.charCodeAt(p+1)){if(60!==d&&62!==d)throw Error("Unexpected '=' Operator @ "+p+" ("+e+")");p++;l=0}else{l=0}}else if(33===d){if(1!==l)throw Error("Unexpected Operator @ "+p+" ("+e+")");if(61===e.charCodeAt(p+1))p++;l=0}else if(37===d||42===d||46===d||63===d||94===d){if(1!==l)throw Error("Unexpected Operator @ "+p);l=0}else{throw Error("Unexpected code 0x"+d.toString(16)+" @ "+p)}}if(e.length-n>0)r.push(e.substr(n,e.length));return r.join("")}function SafeEval(s,filter){return eval(FilterScript(s,filter))}function ModifyEach(e,t,n){if(null==n){for(var r in e){var i=e[r];if(Function===i.constructor)continue;e[r]=t(i)}}else{for(var r in e){var i=e[r];if(Function===i.constructor)continue;e[r]=t.apply(null,[i].concat(n))}}return e}function LinesOf(e){if(null==e||""===e)return[];if(String!==e.constructor)throw Error("LinesOf() passed non-string variable");e=e.replace(/\r(?!\n)/g,"").replace(/\r\n/g,"\n");var t=e.split("\n");return t}function JsTypeOf(e){if(null==e)return undefined;switch(e.constructor){case String:case Number:case Boolean:case RegExp:case Date:case Object:case Function:return e.constructor;default:if(undefined!==e.hasOwnProperty)return Object}return undefined}function JoinArrays(e,t){var n=new Array;for(var r=0;r<arguments.length;r++){var i=arguments[r];if(null==i||0==i.length)continue;i.splice(0,0,n.length,0);n.splice.apply(n,i);i.splice(0,2)}return n}function PushSortAsc(e,t,n){var r=0;if(null!=n){if(Function===n.constructor){for(;r<e.length;r++){if(n(t,e[r])<0)break}}else{for(;r<e.length;r++){if(t[n]<e[r][n])break}}}else{for(;r<e.length;r++){if(t<e[r])break}}if(r<e.length)e.splice(r,0,t);else e.push(t);return r}function PushOrReplace(e,t,n){if(undefined!==n){var r=t[n];for(var i=0;i<e.length;i++){if(r==e[i][n]){e[i]=t;return 1}}}else{for(var i=0;i<e.length;i++){if(t==e[i])return 1}}e.push(t);return 0}function PullOut(e,t,n){var r=0;if(undefined!==n){var i="object"!==typeof t?t:t[n];for(;r<e.length;r++)if(i==e[r][n])break}else{for(var r=0;r<e.length;r++)if(t==e[r])break}if(r<e.length){var s=e[r];e.splice(r,1);return s}return undefined}function InArray(e,t,n,r){if(null==e||Array!==e.constructor||0===e.length)return false;if(null==n||n<0||n>=e.length){for(var i=0;i<e.length;i++)if(e[i]==t)return true}else if(null!=r){for(var i=0;i<n;i++)if(e[i][r]==t)return true;for(var i=1+n;i<e.length;i++)if(e[i][r]==t)return true}else{for(var i=0;i<n;i++)if(e[i]==t)return true;for(var i=1+n;i<e.length;i++)if(e[i]==t)return true}return false}function ToInt(e,t){if(null==e){if(arguments.length<2)return NaN;return t}var n=(""+e).match(/^[\s0]*([1-9][0-9]*)\s*$/);if(null==n){if((""+e).indexOf("0")>=0)return 0;if(arguments.length<2)return NaN;return t}var r=parseInt(n[1]);if(isNaN(r)){if(arguments.length<2)return NaN;return t}return r}function ToBool(e,t){if(null==e){if(arguments.length<2)throw Error("ToBool(null)");return t}else if(Boolean===e.constructor){return e}else if(Number===e.constructor){if(isNaN(e)){if(arguments.length<2)throw Error("ToBool(Number:NaN)");return t}return 0===e?false:true}else if(Date===e.constructor){if(isNaN(e)){if(arguments.length<2)throw Error("ToBool(Date:NaN)");return t}return 0===e.valueOf()?false:true}else if(Array===e.constructor){if(arguments.length<2)throw Error("ToBool(Array)");return t}else if(String!==e.constructor){e=e.toString()}if(""===e){if(arguments.length<2)throw Error('ToBool("")');return t}if(e.length>20){if(arguments.length<2)throw Error('ToBool("'+e.substr(0,20)+'" ...)');return t}if(undefined===ToBool._re1){ToBool._re1=/^true|on|yes|si$/i;ToBool._re0=/^false|off|no$/i;ToBool._reN=/^[-.0-9]{1,20}$/}if(true===ToBool._reN.test(e)){var n=parseFloat(e);if(isNaN(n)){if(arguments.length<2)throw Error("ToBool(Number:"+n+")");return t}return 0===n?false:true}if(true===ToBool._re1.test(e))return true;if(true===ToBool._re0.test(e))return false;if(arguments.length<2)throw Error('ToBool("'+e+'")');return t}function IsError(e){if(null==e||"object"!==typeof e)return false;switch(e.constructor){case Error:case EvalError:case RangeError:case ReferenceError:case SyntaxError:case TypeError:case URIError:return true}if(null!=e.is&&e.is(Error))return true;return false}function IsString(e){if(null==e)return false;if(String.constructor===e.constructor)return true;return false}function IsBlank(e){if(null==e)return true;if(String!==e.constructor)return false;if(0===e.length)return true;if(undefined===IsBlank.re)IsBlank.re=/^\s+$/;return IsBlank.re.test(e)}function CopyObject(e,t){if(null==t){t=new Object;for(var n in e)t[n]=e[n]}else{for(var n in e){if(!t.hasOwnProperty(n))t[n]=e[n]}}return t}function FuncName(e){if(null==e)return null;if(Function!==e.constructor){if(null==e.constructor)return null;e=e.constructor}var t=e.toString().match(/function[ \r\n\t]*([^(]*)/);if(null==t)return null;return t[1]}function CharsToInt32(e,t,n){if(true===n){throw Error("Not Implemented")}if(null==t||0==t){return e.charCodeAt(0)<<24|e.charCodeAt(1)<<16|e.charCodeAt(2)<<8|e.charCodeAt(3)}return e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3)}function Int32ToChars(e,t){if(true===t){throw Error("Not Implemented")}return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,e&255)}function SortIgnoreCase(e,t){if(null==e)e="";if(null==t)t="";var n=e.toString().toLowerCase();var r=t.toString().toLowerCase();if(n<r)return-1;if(r<n)return 1;return 0}
